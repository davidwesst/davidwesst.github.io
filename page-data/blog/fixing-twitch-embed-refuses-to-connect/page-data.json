{
    "componentChunkName": "component---src-templates-post-template-js",
    "path": "/blog/fixing-twitch-embed-refuses-to-connect/",
    "result": {"data":{"markdownRemark":{"excerpt":"The First Problem After following along with the Twitch developer documentation about embedding the non-interactive inline frames I hit the following error…","html":"<h2>The First Problem</h2>\n<p>After following along with the <a href=\"https://dev.twitch.tv/docs/embed/video-and-clips#non-interactive-inline-frames-for-live-streams-and-vods\">Twitch developer documentation about embedding the non-interactive inline frames</a> I hit the following error:</p>\n<blockquote>\n<p>Failed to load resource: the server responded with a status of 403 ()</p>\n</blockquote>\n<p>Which looked something like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6acaa70bee3afefd78a36977e71c900/ec3e2/twitch-player-misconfigured.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABU0lEQVQoz61SvU4CQRjc+989InLrnXdR5ChQS8FIYUKhDblIceESk3sFKkLojAVPQEUCgQYewAfgAc7SxCcas2tOC8HgTzHZ/Xa+md3ZfCSKIhBC/gW9Xg+k2+3KwjAMqKr6BYqifAg28QJCK/jBYAASx7EsNE3benOSpIjj+618ru33+9sN85c5JY7V6gnj8Qymaf3eMAelDK3WLer1KyhE2d1Q/IWu62CMwTRNHPo+TiplcHcfJb6HYqkAP3ARVkNwzmUPpVRqNFXdbGjbNnw/AOcHcD0Xx0GIWvkC59VLnIUNnFYaOApCONyRPZ7ngdlManeKXHNuMLp7xUOU4bHzjFHnBdXi9feRkySRhYggCBlB0+Xe0E1QqwAmQN9XcSa4vEfAsqzPsWm3238aZmGWpimazSaGwyHIer3GZDLBYrHAfD7/MYRuuVxiOp0iyzK8ASYoLrZ/klamAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Twitch embedded iframe stating: Failed to load resource: the server responded with a status of 403\"\n        title=\"Twitch embedded iframe stating: Failed to load resource: the server responded with a status of 403\"\n        src=\"/static/f6acaa70bee3afefd78a36977e71c900/f058b/twitch-player-misconfigured.png\"\n        srcset=\"/static/f6acaa70bee3afefd78a36977e71c900/c26ae/twitch-player-misconfigured.png 158w,\n/static/f6acaa70bee3afefd78a36977e71c900/6bdcf/twitch-player-misconfigured.png 315w,\n/static/f6acaa70bee3afefd78a36977e71c900/f058b/twitch-player-misconfigured.png 630w,\n/static/f6acaa70bee3afefd78a36977e71c900/40601/twitch-player-misconfigured.png 945w,\n/static/f6acaa70bee3afefd78a36977e71c900/ec3e2/twitch-player-misconfigured.png 997w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>First Solution</h3>\n<p>This one was on me, and I didn’t read the documentation correctly. Turns out I formatted the query string wrong in the <code class=\"language-text\">src</code> property and solved it by add <code class=\"language-text\">?video=&lt;the-id-goes-here></code>.</p>\n<p>Which bring us to…</p>\n<h2>The Second Problem</h2>\n<p>Although the other issue is solved, we now see this “player refuses to connect” error message that looks like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ab1b4da026f545e1e7ba31c63695bb5/84a90/twitch-player-refuse-to-connect.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAhElEQVQoz72TywqAIBRE+/+PFAXlhi9QcT2hEURlD5QWgyPIuaOMk7UWxpguFYbWGiEETN57jJBzDjHGFVg2PboEtqYe/d3ZE3C/7qe3oMeBlwlbCe7Sf0r49G6vgDMRGGPgnEMIASkllFIgoupLVf698tAe9nZwU/ktFZhSqmaEcs5YAHwQi39GkxKdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Twitch embedded iframe stating: player.twitch.tv refused to connect\"\n        title=\"Twitch embedded iframe stating: player.twitch.tv refused to connect\"\n        src=\"/static/4ab1b4da026f545e1e7ba31c63695bb5/f058b/twitch-player-refuse-to-connect.png\"\n        srcset=\"/static/4ab1b4da026f545e1e7ba31c63695bb5/c26ae/twitch-player-refuse-to-connect.png 158w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/6bdcf/twitch-player-refuse-to-connect.png 315w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/f058b/twitch-player-refuse-to-connect.png 630w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/40601/twitch-player-refuse-to-connect.png 945w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/84a90/twitch-player-refuse-to-connect.png 982w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>This happened both in local development environment and my published post on davidwesst.com. Opening up the browser console gave me a bit of a clue though. It read:</p>\n<blockquote>\n<p>Refused to frame ’<a href=\"https://player.twitch.tv/\">https://player.twitch.tv/</a>’ because an ancestor violates the following Content Security Policy directive: “frame-ancestors  <a href=\"https://www.davidwesst.com\">https://www.davidwesst.com</a>“.</p>\n</blockquote>\n<p>Again— read the documentation closer and realize that if you don’t include the base url of wheverever you’re hosting from, such as <code class=\"language-text\">localhost</code> or <code class=\"language-text\">127.0.0.1</code> or <code class=\"language-text\">www.davidwesst.com</code> in my case, the Twitch player is going to refuse the connection.</p>\n<h3>Second Solution</h3>\n<p>All I ended up doing was adding some <code class=\"language-text\">parent</code> values to my query string on the <code class=\"language-text\">src</code> property and TA-DA! it worked. My iframe embed look like this now:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;iframe\n    src=\"https://player.twitch.tv/?video=1241089585&amp;parent=127.0.0.1&amp;parent=www.davidwesst.com\"\n    height=\"360\"\n    width=\"640\"\n    allowfullscreen=\"true\">\n&lt;/iframe></code></pre></div>\n<h2>A Better Solution</h2>\n<p>Although this works, I don’t like that I have to put all my development URLs in the query string to get this working in development and in production. I <em>could</em> do something around changing the strings on build (depending on where it’s hosted) but I need to digest it a bit more to decide the best option.</p>\n<p>I’ve created an <a href=\"https://github.com/davidwesst/website/issues/86\">issue on GitHub</a> and if you have ideas or thoughts, I’d love to hear them in the issue (or the comments of this post).</p>\n<h2>Lessons Learned</h2>\n<p>First, read the developer documentation thuroughly.</p>\n<p>Second, although this isn’t the prettiest solution, it delivers value immediately and unblocks my content creator role (i.e. writing blog posts). It’s important to remember to assess an issue and sometimes you need to use some duct tape to keep things moving while you wait for the “best fix” to be ready.</p>\n<p>Thanks for playing.</p>\n<p>~ DW</p>","fields":{"slug":"/blog/fixing-twitch-embed-refuses-to-connect/"},"frontmatter":{"title":"Working around 'Refuses to Connect' Issues with IFrame Embedded Twitch Players","tags":["livestream","markdown","html","twitch","bug"],"categories":["code"],"date":"January 26, 2022","description":"With me doing more livecoding sessions on Twitch, I wanted to embed some clips into my blog posts and hit some weird issues. I managed to get it working and wanted to document the workaround so I don't forget it.","excerpt":null,"social_image":{"publicURL":"/static/4ab1b4da026f545e1e7ba31c63695bb5/twitch-player-refuse-to-connect.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#e8e8e8","images":{"fallback":{"src":"/static/4ab1b4da026f545e1e7ba31c63695bb5/b54ff/twitch-player-refuse-to-connect.png","srcSet":"/static/4ab1b4da026f545e1e7ba31c63695bb5/b3c17/twitch-player-refuse-to-connect.png 246w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/e4030/twitch-player-refuse-to-connect.png 491w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/b54ff/twitch-player-refuse-to-connect.png 982w","sizes":"(min-width: 982px) 982px, 100vw"},"sources":[{"srcSet":"/static/4ab1b4da026f545e1e7ba31c63695bb5/387e7/twitch-player-refuse-to-connect.webp 246w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/ae64c/twitch-player-refuse-to-connect.webp 491w,\n/static/4ab1b4da026f545e1e7ba31c63695bb5/36b12/twitch-player-refuse-to-connect.webp 982w","type":"image/webp","sizes":"(min-width: 982px) 982px, 100vw"}]},"width":982,"height":565}}}}},"prev":null,"next":{"frontmatter":{"title":"Cannot Find Module Bootloader.js in VSCode DevContainer"},"fields":{"slug":"/blog/missing-bootloader-in-vscode-devcontainer/"}}},"pageContext":{"slug":"/blog/fixing-twitch-embed-refuses-to-connect/","prevSlug":null,"nextSlug":"/blog/missing-bootloader-in-vscode-devcontainer/"}},
    "staticQueryHashes": ["1308755293","2841359383","4224293195"]}