{
    "componentChunkName": "component---src-templates-post-template-js",
    "path": "/blog/running-tomcat-apps-on-docker-through-eclipse/",
    "result": {"data":{"markdownRemark":{"excerpt":"If you didn’t already know, Docker is pretty cool. Not sure what it is? My fellow Western Dev Kyle Baley explains it really well and provides some great cases…","html":"<p>If you didn’t already know, <a href=\"https://www.docker.com\">Docker</a> is pretty cool. Not sure what it is? My fellow Western Dev <a href=\"http://www.westerndevs.com/docker-is-coming-whether-you-like-it-or-not/\">Kyle Baley</a> explains it really well and provides some great cases about why Docker is fantastic.</p>\n<p>This post is an example of Docker being fantastic and should be considered a warm-up to Docker.</p>\n<!--more-->\n<p>Although I’m talking Tomcat and Eclipse, this idea can be used with pretty much any combination of technologies available through Docker and your development environment of choice.</p>\n<h2>Context</h2>\n<p>When I dive into the code, I don’t want to have to worry about running some version of Tomcat on my development machine.</p>\n<p>Docker can solve that.</p>\n<p>I also don’t like obscuring part of my solution through <em>IDE Magic</em>, such that when I run my Tomcat application I want to know how it’s running. In fact, not only do I want to know <em>how</em> it runs, but I want the steps to run the application to be automated so I don’t have to think about it. I know Eclipse can do this natively, but because I’m not looking to run Tomcat on my machine, it adds some challenges.</p>\n<p>Here’s what I did.</p>\n<h2>Solution</h2>\n<p>The solution is a simple one, but it works consistently. Plus, we’ll even integrate it with Eclipse so people that don’t like leaving their IDE can continue to code in in their comfort zone.</p>\n<p>I am assuming that you…</p>\n<ul>\n<li>…are running Windows</li>\n<li>…have a Maven web app project</li>\n<li>…have setup Boot2Docker</li>\n<li>…have a linux-flavoured shell (like Git Bash)</li>\n</ul>\n<p>Maven gives us a standard structure for our project. More specifically, it packages everything up into the <code class=\"language-text\">/target</code> directory so that we can map the volume to our docker image.</p>\n<p>Now, let’s make this run every time.</p>\n<h3>The Start Script</h3>\n<p>The first script I created just packages things up, makes sure boot2docker is running, and runs docker.</p>\n<p>Being that I run the script from the project root, it looks like this:</p>\n<p>{% codeblock lang:bash %}\r\n#!/bin/bash</p>\n<h1>package the WAR file</h1>\n<p>mvn package</p>\n<h1>Make sure docker instance is running</h1>\n<p>boot2docker up</p>\n<h1>Run the application</h1>\n<p>docker run —rm -p 8080:8080 -v //./target/mywebapp:/usr/local/tomcat/webapps/mywebapp tomcat:6.0\r\n{% endcodeblock %}</p>\n<h3>The Stop Script</h3>\n<p>Thanks to the power of Bingoogle, I was able to find <a href=\"https://coderwall.com/p/ewk0mq/stop-remove-all-docker-containers\">this</a>.</p>\n<p>{% codeblock lang:bash %}\r\ndocker stop $(docker ps -a -q)\r\n{% endcodeblock %}</p>\n<p>And there are my scripts to start and stop my application. The main reason for creating these is to make sure that anyone pulling down the solution can be productive. Even those that like staying inside of Eclipse all the time.</p>\n<h3>Integrating with Eclipse</h3>\n<p>Because we have these scripts, we can setup a couple of “External Tools” to start and stop at the push of a button.</p>\n<p><img src=\"http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/1-externaltoolsbutton.png\" alt=\"\"></p>\n<p>To set it up, click the button or the drop down and select “External Tools Configuration”, then setup a couple of programs where you call sh.exe (provided with Git Bash) and our new scripts as the arguments.</p>\n<p><img src=\"http://blog.davidwesst.com/2015/08/Running-Tomcat-Apps-on-Docker-through-Eclipse/2-configwindow.png\" alt=\"\"></p>\n<p>Now everybody can start and stop at their leisure. Plus, if we need to add more complexity to starting and stopping, we can just extend the scripts.</p>\n<h3>Alternatively…Make a Dockerfile</h3>\n<p>That being said, we could also customize our docker image to include files right on the image rather than mapping volumes. Although this doesn’t add any value to this example, it might later on if we want to start customizing our Tomcat server to include multiple files or other libraries that our application will need.</p>\n<p><strong>FUN FACT:</strong> Copying the files over to the image means that you can’t do any debugging on them in your environment right away, as opposed to if you were to map the files locally. Not a big deal in some cases, but I like to keep all the doors open for debugging.</p>\n<p>Here’s an example, but you can get the full scoop on dockerfiles <a href=\"https://docs.docker.com/articles/dockerfile_best-practices/\">here</a>:</p>\n<p>{% codeblock lang:bash %}\r\nFROM tomcat:6.0\r\nMAINTAINER David Wesst <a href=\"mailto:questions@davidwesst.com\">questions@davidwesst.com</a></p>\n<h1>add our WAR files</h1>\n<p>ADD target/*.war /usr/local/tomcat/webapps/\r\n{% endcodeblock %}</p>\n<p>Then we need to update our <code class=\"language-text\">start-docker.sh</code> file from above to build the new image so we can run it.</p>\n<p>{% codeblock lang:bash %}\r\n#!/bin/bash</p>\n<h1>package the WAR file</h1>\n<p>mvn package</p>\n<h1>Make sure docker instance is running</h1>\n<p>boot2docker up</p>\n<h1>Build a new docker image</h1>\n<p>docker build -t davidwesst/tomcatsample:dev .</p>\n<h1>Run the application</h1>\n<p>docker run —rm -p 8080:8080 umanitoba/tomcatsample:dev\r\n{% endcodeblock %}</p>\n<h3>The Point</h3>\n<p>This is a pretty straightforward example on how to use docker, and how to tie it into any processes or IDEs that you may have. I know that <a href=\"http://www.eclipse.org/community/eclipse_newsletter/2015/june/article3.php\">Eclipse Mars has functionality for docker</a>, but sometimes we don’t get to use the shiny new toy and need to stick with the old realiable ones. This solution works with Eclipse Luna, and below from what I can gather, so people that are stuck using older IDEs can still enjoy Docker.</p>\n<p>…but you should really get comfortable with the command line and <a href=\"http://blog.davidwesst.com/talks/\">Learn to be IDE Free (Shameless Self Promotion)</a>.</p>\n<p>—\r\nThanks for Playing\r\n~ DW</p>","fields":{"slug":"/blog/running-tomcat-apps-on-docker-through-eclipse/"},"frontmatter":{"title":"Running Tomcat Apps on Docker through Eclipse","tags":["java","eclipse","docker","tomcat"],"categories":["development"],"date":"August 07, 2015","description":null,"excerpt":null,"social_image":null}},"prev":{"frontmatter":{"title":"Docker on Windows 10 Problems"},"fields":{"slug":"/blog/docker-on-windows-10-problems/"}},"next":{"frontmatter":{"title":"Considerations When Migrating Your Blog"},"fields":{"slug":"/blog/considerations-when-migrating-your-blog/"}}},"pageContext":{"slug":"/blog/running-tomcat-apps-on-docker-through-eclipse/","prevSlug":"/blog/docker-on-windows-10-problems/","nextSlug":"/blog/considerations-when-migrating-your-blog/"}},
    "staticQueryHashes": ["1308755293","2841359383","4224293195"]}